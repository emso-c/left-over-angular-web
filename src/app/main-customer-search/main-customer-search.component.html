<mat-form-field>
  <mat-label>Aramak için tıkla...</mat-label>
  <input type="text"
          matInput
          [formControl]="myControl"
          [matAutocomplete]="auto"
          (input)="filterFoods()"
          (ngModelChange)="filterFoods()">
  <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
    <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
      {{option}}
    </mat-option>
  </mat-autocomplete>
</mat-form-field>
<mat-form-field>
  <mat-label>Min Fiyat</mat-label>
  <input (input)="filterFoods()" matInput type="number" [(ngModel)]="minPrice" name="minPrice" placeholder="Min Fiyat">
</mat-form-field>
<mat-form-field>
  <mat-label>Max Fiyat</mat-label>
  <input (input)="filterFoods()" matInput type="number" [(ngModel)]="maxPrice" name="maxPrice" placeholder="Max Fiyat">
</mat-form-field>
<mat-form-field [style.width.px]=300 appearance="outline">
  <mat-label>Kategori</mat-label>
  <mat-select
  name="category"
  [(ngModel)]="selectedCategory"
  disableOptionCentering
  [disabled]="!categoryService.categories.length"
  (selectionChange)="onCategoryChange($event.value)"
  >
  <div class="w-100 p-2 d-flex flex-column">
    <mat-option class="border border-2 rounded w-100 p-2 m-1" [value]="">
      <span class="mx-2 my-auto">Hiçbiri</span>
    </mat-option>
    <mat-option class="border border-2 rounded w-100 p-2 m-1" *ngFor="let category of categoryService.categories" [value]="category.key">
      <img src="{{ category.img }}" alt="category" width="50" height="50" class="rounded-2">
      <span class="mx-2 my-auto">{{ category.label }}</span>
      <span class="float-end"></span>
    </mat-option>
    </div>
  </mat-select>
</mat-form-field>


<div *ngIf="foodService.loaded">
  <div *ngFor='let food of filteredFoods'>
    <img (click)="handleFoodClick(food._id)" src="{{food.img}}" alt="food image" width="200px" height="200px">
    <h3>{{food.title}}</h3>
    <p>{{food.description}}</p>
    <p class="text-decoration-line-through">{{food.main_price}}</p>
    <p>{{food.sales_price}}</p>
    <p>%{{getDiscount(food)}} indirim</p>
  </div>
  <div *ngIf="filteredFoods.length == 0">
    <h3>Aradığınız kriterlere uygun ürün bulunamadı.</h3>
  </div>
</div>