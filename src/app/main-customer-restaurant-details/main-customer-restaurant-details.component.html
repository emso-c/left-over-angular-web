<div *ngIf="!userService.loaded" class="fullscreen-loading"></div>

<mat-tab-group headerPosition="above">
  <mat-tab label="Detaylar">
    <div *ngIf="restaurant">
      <img src={{restaurant.details.img}} width="100" height="100">
      <h2>{{restaurant.details.title}}</h2>
      <h3>{{restaurant.details.description}}</h3>
      <h5>{{utilsService.humanReadableDate(restaurant.details.createdAt)}}</h5>
      <h5>{{restaurant.details.foods.length}} foods</h5>
      <h5>{{restaurant.details.comments.length}} comments</h5>
      <a (click)="handleFavorite(restaurant.details._id)">
        <mat-icon mat-list-icon>
          favorite{{userService.currentUser?.details.favoriteRestaurants.includes(restaurant.details._id) ? '':'_outline'}}
        </mat-icon>
      </a>
    </div>
  </mat-tab>
  <mat-tab label="Menu">
    <div *ngIf="foodService.foods.length > 0">
      <ul *ngFor="let food of foodService.foods">
        <li *ngIf="restaurant?.details.foods.includes(food._id)">
          <img src="{{food.img}}" alt="food image" width="200px" height="200px">
          <h3>{{food.title}}</h3>
          <p>{{food.description}}</p>
          <p class="text-decoration-line-through">{{food.main_price}}</p>
          <p>{{food.sales_price}}</p>
        </li>
      </ul>
    </div>
  </mat-tab>
  <mat-tab label="Yorumlar">
    <div *ngIf="commentService.comments.length > 0">
      <ul *ngFor="let comment of commentService.comments">
        <li 
        *ngIf="restaurant?.details.comments.includes(comment._id)"
        class="list-group-item"
        >
          <div class="d-flex flex-row">
            <img src="{{ comment.user.img }}" alt="user" width="50" height="50" class="rounded-circle">
            <div class="d-flex flex-column">
              <span class="mx-2 my-auto">{{ comment.user.fullName }}</span>
              <span class="mx-2 my-auto">{{ comment.createdAt }}</span>
            </div>
          </div>
          <div class="d-flex flex-row">
            <span class="mx-2 my-auto">{{ comment.description }}</span>
          </div>
      </ul>
    </div>
  </mat-tab>
</mat-tab-group>